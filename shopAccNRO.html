<!DOCTYPE html>
<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <style>
            .nen {
            background-color: rgba(0, 0, 0, 0.4); /* Màu nền với độ trong suốt 60% */
            }
            body {
                background-image: url('https://i0.wp.com/thatnhucuocsong.com.vn/wp-content/uploads/2022/01/tai-anh-7-vien-ngoc-rong.jpg');
                background-size: cover;
                background-repeat: no-repeat;
                background-attachment: fixed;
                background-position: center;
            }
            .co {
                max-width: 1200px;
            }
            .tacvu {
                color: #ffffff;
                font-weight: 700;
            }
            .tacvu:hover {
                color: #311fd0;
            }
            h2{
                color: #ffffff;
            }
            label{
                background-color: #FAFAFA;
            }
            .khungvuong{
                border-radius: 0%;
                
            }
            .khung{
                background-color: #ffffff; 
                border: 1px solid rgb(89, 89, 106); 
                border-radius: 6px;
            }
            .phan_trang{
            text-align: center;
            margin: 30px 0px 60px;
            user-select: none;
            }
            .phan_trang li{
                display: inline-block;
                margin: 5px;
                box-shadow: 0 5px 25px rgb(1 1 1 / 10%);
            }
            .phan_trang li a{
                color: #fff;
                text-decoration: none;
                font-size: 1.2em;
                line-height: 45px;
            }
            .trang_truoc, .trang_tiep{
                background: #0AB1CE;
                width: 80px;
                border-radius: 45px;
                cursor: pointer;
                
            }
            .muc_trang:hover{
                transition: 0.3s ease;
                transform: translateY(-5px);
            }
            .hien_trang, .cham{
                background: #ccc;
                width: 45px;
                border-radius: 50%;
                cursor: pointer;
            }
            .active{
                background: #0AB1CE;
            }
            .disable{
                background: #ccc;
            }
            .modal {
            display: none; /* Ẩn modal khi trang load */
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        /* Nội dung bên trong modal */
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
        }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark nen">
            <div class="container co mx-auto">
                <a class="navbar-brand" href="#">
                    <img src="anhshopvip.png" style="height: 100px; width: 200px;" class="img-fluid" alt="Logo">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a id="btn_trang_chu" class="nav-link tacvu" href="trangchubanacc.html">TRANG CHỦ</a>
                        </li>
                        <li class="nav-item">
                            <a id="btn_nap_tien" class="nav-link tacvu" href="dang_nhap.html">NẠP TIỀN</a>
                        </li>
                        <li class="nav-item">
                            <a id="btn_dich_vu" class="nav-link tacvu" href="DichVu.html">DỊCH VỤ</a>
                        </li>
                        <li class="nav-item">
                            <a id="btn_shop_acc" class="nav-link tacvu" href="shopAccNRO.html">NIK GAME</a>
                        </li>
                        <li class="nav-item">
                            <a id="btn_dang_nhap" class="nav-link tacvu border border-secondary rounded" href="dang_nhap.html"><i class="bi bi-person"></i> ĐĂNG NHẬP</a>
                        </li>
                        <li class="nav-item">
                            <a id="btn_dang_ky" class="nav-link tacvu border border-secondary rounded" href="dangKyTaiKhoan.html"><i class="bi bi-key"></i> ĐĂNG KÝ</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="col co mx-auto nen mt-3 py-4">
            <h2 class="text-center">SHOP ACC NGỌC RỒNG ONLINE</h2>
            <div style="width: 100px; height: 1px; margin: 20px auto; border-bottom: 4px solid #e90606;"></div>
            <div class="row w-100 m-0">
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;"  for="maAcc">Mã acc</label>
                    <div class="col px-0">
                        <input class="form-control h-100 khungvuong" type="text" id="maAcc" name="maAcc" placeholder="Nhập mã acc"/>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="gia">Giá</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="gia" name="gia">
                            <option value="0">Tất cả</option>
                            <option value="tu_50-100k">Từ 50 - 100k</option>
                            <option value="tu_100-250k">Từ 100 - 250k</option>
                            <option value="tu_250-500k">Từ 250 - 500k</option>
                            <option value="tu_500-1tr">Từ 500 - 1tr</option>
                            <option value="tu_1tr-2tr5">Từ 1tr - 2tr5</option>
                            <option value="tren_2tr5">Trên 2tr5</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="dangky">Đăng ký</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="dangky" name="dangky">
                            <option value="0">Tất cả</option>
                            <option value="dang_ky_ao">Đăng ký ảo</option>
                            <option value="dang_ky_chinh_chu">Đăng ký chính chủ</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="hanhtinh">Hành tinh</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="hanhtinh" name="hanhtinh">
                            <option value="0">Tất cả</option>
                            <option value="trai_dat">Trái Đất</option>
                            <option value="namec">Namec</option>
                            <option value="xayda">Xayda</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="server">Server</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="server" name="server">
                            <option value="0">Tất cả</option>
                            <option value="server_1">Server 1</option>
                            <option value="server_2">Server 2</option>
                            <option value="server_3">Server 3</option>
                            <option value="server_4">Server 4</option>
                            <option value="server_5">Server 5</option>
                            <option value="server_6">Server 6</option>
                            <option value="server_7">Server 7</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="loaiacc">Loại acc</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="loaiacc" name="loaiacc">
                            <option value="0">Tất cả</option>
                            <option value="so_sinh">Sơ Sinh</option>
                            <option value="tam_trung">Tầm trung</option>
                            <option value="vip">Vip</option>
                            <option value="win_doanh_trai">Win doanh trại</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <label class="col-form-label text-center" style="width: 120px;" for="bongtai">Bông tai</label>
                    <div class="col px-0">
                        <select class="form-select h-100 khungvuong" id="bongtai" name="bongtai">
                            <option value="0">Tất cả</option>
                            <option value="khong">Không</option>
                            <option value="co">Có</option>
                        </select>
                    </div>
                </div>
                <div class="row mb-3 col-md-3 mx-0">
                    <button type="button" style="width: 120px;" class="btn btn-primary" onclick="timnick()">Tìm kiếm</button>
                </div>
                <div class="mx-auto row px-0" id="AccNRO"></div>
                <div class="phan_trang">
                    <li class="muc_trang trang_truoc disable"><a class="link_trang" href="#">Prev</a></li>
                    <li class="muc_trang hien_trang active"><a class="link_trang" href="#">1</a></li>
                    <li class="muc_trang cham"><a class="link_trang" href="#">...</a></li>
                    <li class="muc_trang hien_trang"><a class="link_trang" href="#">5</a></li>
                    <li class="muc_trang hien_trang"><a class="link_trang" href="#">6</a></li>
                    <li class="muc_trang cham"><a class="link_trang" href="#">...</a></li>
                    <li class="muc_trang hien_trang"><a class="link_trang" href="#">10</a></li>
                    <li class="muc_trang trang_tiep"><a class="link_trang" href="#">Next</a></li>
                </div>
            </div>
        </div>


        <div style="background-color: #2f353b; height: 500px">
            <div class="row co mx-auto mt-3 py-4" style="background-color: #2f353b;">
                <div class="col-md-5 p-4" style="color: #5c6873;">HỆ THỐNG BÁN ACC NGỌC RỒNG TỰ ĐỘNG - ĐẢM BẢO UY TÍN VÀ CHẤT LƯỢNG.</div>
                <div class="col-md-5 p-4" style="color: #5c6873;">CHÚNG TÔI LUÔN LẤY UY TÍN LÀM HÀNG ĐẦU ĐỐI VỚI KHÁCH HÀNG. HI VỌNG SẼ ĐƯỢC PHỤC VỤ CÁC BẠN. CẢM ƠN!</div>
            </div>
        </div>
        <div class="modal" id="myModal">
            <div class="modal-content">
                <h2>Modal Content</h2>
                <p>This is a simple modal!</p>
                <button onclick="closeModal()">Close Modal</button>
            </div>
        </div>
        <script>
            $(document).ready(function() {    
                timnick();
            });

            function timnick() {
                var gia = $('#gia').val();
                var dangky = $('#dangky').val();
                var hanhtinh = $('#hanhtinh').val();
                var server = $('#server').val();
                var loaiacc = $('#loaiacc').val();
                var bongtai = $('#bongtai').val();
                var maAcc = $('#maAcc').val();
                
                var min_gia, max_gia;

                switch(gia){
                    case "tu_50-100k":
                        min_gia = 50000;
                        max_gia = 100000;
                        break;
                    case "tu_100-250k":
                        min_gia = 100000;
                        max_gia = 250000;
                        break;
                    case "tu_250-500k":
                        min_gia = 250000;
                        max_gia = 500000;
                        break;
                    case "tu_500-1tr":
                        min_gia = 500000;
                        max_gia = 1000000;
                        break;
                    case "tu_1tr-2tr5":
                        min_gia = 1000000;
                        max_gia = 2500000;
                        break;
                    case "tren_2tr5":
                        gia_min = 2500000;
                        gia_max = Infinity; // Không giới hạn trên
                        break;
                    default:
                        gia_min = 0;
                        gia_max = Infinity;
                        break;
                    
                }
                $.get("http://localhost:3000/nicknro", function(data, status) {
                    $('#AccNRO').empty(); // Xóa các kết quả cũ
                    var ketQua = false;
                    
                    data.forEach(function(item) {
                        var giaSS = parseInt(item.gia.replace(/[^0-9]/g, ''));
                        if (
                            (gia == 0 || (giaSS >= min_gia && giaSS <= max_gia)) &&
                            (dangky == 0 || item.dangky == dangky) &&
                            (hanhtinh == 0 || item.hanhtinh == hanhtinh) &&
                            (server == 0 || item.server == server) &&
                            (loaiacc == 0 || item.loaiacc == loaiacc) &&
                            (bongtai == 0 || item.bongtai == bongtai) &&
                            (maAcc == '' || item.id.includes(maAcc))
                        ) {
                            ketQua = true;
                            var veHTML = '<div class="mb-3 col-md-4 col-sm-6 san_pham">';
                            
                                veHTML += '<div id="timAcc" class="khung row mx-0 pb-3">';
                                    
                                    veHTML += '<img src="' + item.anh1 + '" alt="Mô tả hình ảnh" class="w-100 px-0" style="height: 180px">';

                                    veHTML += '<p style="background-color: red; color: #ffffff;" class="col-6"><strong>Mã acc:</strong> ' + item.id + '</p>';
                                
                                    veHTML += '<p style="background-color: #0096ff; color: #ffffff;" class="col-6"><strong>Giá:</strong> ' + item.gia + '</p>';

                                    veHTML += '<p class="col-6"><strong>Đăng ký:</strong> ' + (item.dangky === "dang_ky_ao" ? 'Ảo' : 'Chính chủ') + '</p>';

                                    veHTML += '<p class="col-6"><strong>Hành tinh:</strong> ' + (item.hanhtinh === "trai_dat" ? 'Trái Đất' : item.hanhtinh === "namec" ? 'Namec' : 'Xaydaa') + '</p>';

                                    veHTML += '<p class="col-6"><strong>Server:</strong> ' + (item.server === "server_1" ? 'Server 1' : item.server === "server_2" ? 'Server 2' : item.server === "server_3" ? 'Server 3' : item.server === "server_4" ? 'Server 4' : item.server === "server_5" ? 'Server 5' : item.server === "server_6" ? 'Server 6' : 'Server 7') + '</p>';
                                    veHTML += '<p class="col-6"><strong>Loại acc:</strong> '  + (item.loaiacc === "so_sinh" ? 'Sơ Sinh' : item.loaiacc === "tam_trung" ? 'Tầm trung' : item.loaiacc === "vip" ? 'Vip' : 'Win DT') + '</p>';
                                    veHTML += '<p class="col-6"><strong>Bông tai:</strong> ' + (item.bongtai === "khong" ? 'Không' : 'Có') + '</p>';
                                    
                                    veHTML += '<div>'
                                        veHTML += '<a class="xem_them btn btn-success col-12" href="chiTietTaiKhoan.html?id=' + item.id + '">XEM THÊM</a>';
                                    veHTML += '</div>';
                                    
                                veHTML += '</div>';
                            veHTML += '</div>';
                            $('#AccNRO').append(veHTML);
                        }
                    });
        
                    if (!ketQua) {
                        $('#AccNRO').append('<p style="color: red; font-weight: 600;">Xin lỗi, không có acc nào bạn tìm kiếm!</p>');
                    }
                    
                    phanTrang(); 
                    taiKhoan();
                });
                
            }
            function openModal() {
                document.getElementById("myModal").style.display = "flex";
            }

            function closeModal() {
                document.getElementById("myModal").style.display = "none";
            }
            function getPageList(totalPages, page, maxLength){
                function range(start, end){
                    return Array.from(Array(end - start + 1), (_, i) => i + start);
                }
                var sideWidth = maxLength < 9 ? 1 : 2;
                var leftWidth = (maxLength - sideWidth * 2 -3) >> 1;
                var rightWidth = (maxLength - sideWidth * 2 -3) >> 1;
                if(totalPages <= maxLength){
                    return range(1, totalPages)
                }
                if(page <= maxLength - sideWidth - 1 - rightWidth){
                    return range(1, maxLength - sideWidth - 1).concat(0, range(totalPages - sideWidth + 1, totalPages));
                }
                if(page >= totalPages - sideWidth - 1 - rightWidth){
                    return range(1, sideWidth).concat(0, range( totalPages - sideWidth - 1 - rightWidth - leftWidth, totalPages));
                }
                return range(1, sideWidth).concat(0, range(page - leftWidth, page + rightWidth), 0, range(totalPages - sideWidth + 1, totalPages));
            }

            function phanTrang() {
                var numberOfItems = $("#AccNRO .san_pham").length;
                var limitPerPage = 3;//how many card iteams vidible per a page
                var totalPages = Math.ceil(numberOfItems / limitPerPage);
                var paginationSize = 7; //how many page elments visible in the paginnation
                var currentPage;

                function showPage(whichPage){
                    if(whichPage < 1 || whichPage > totalPages) return false;

                    currentPage = whichPage;

                    $("#AccNRO .san_pham").hide().slice((currentPage - 1) * limitPerPage, currentPage * limitPerPage).show();

                    $(".phan_trang li").slice(1, -1).remove();

                    getPageList(totalPages, currentPage, paginationSize).forEach(item =>{
                        $("<li>").addClass("muc_trang").addClass(item ? "hien_trang" : "cham").toggleClass("active", item === currentPage).append($("<a>").addClass("link_trang").attr({href: "javascript:void(0)"}).text(item || "...")).insertBefore(".trang_tiep");
                        
                    });
                    $(".trang_truoc").toggleClass("disable", currentPage === 1);
                    $(".trang_tiep").toggleClass("disable", currentPage === totalPages);
                    return true;
                }
                $(".phan_trang").append(
                    $("<li>").addClass("muc_trang").addClass("trang_truoc").append($("<a>").addClass("link_trang").attr({href: "javascript:void(0)"}).text("Prev")),
                    $("<li>").addClass("muc_trang").addClass("trang_tiep").append($("<a>").addClass("link_trang").attr({href: "javascript:void(0)"}).text("Next"))
                );
                $("#AccNRO").show();
                showPage(1);

                $(document).on("click", ".phan_trang li.hien_trang:not(.active)", function(){
                    return showPage(+$(this).text());
                });
                $(".trang_tiep").on("click", function(){
                    return showPage(currentPage + 1);
                });
                $(".trang_truoc").on("click", function(){
                    return showPage(currentPage - 1);
                });
            };
        
        </script>
        <script src="dangNhap.js"></script>
    </body>
</html>